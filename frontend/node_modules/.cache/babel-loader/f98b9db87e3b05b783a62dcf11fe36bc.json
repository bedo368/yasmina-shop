{"ast":null,"code":"var _jsxFileName = \"/mnt/d/react&bac/mern-shop/frontend/src/pages/order/OrderPage.jsx\";\nimport Axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport { useState } from \"react\";\nimport { Col, ListGroup, Row, Image, Card, Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../../components/loader/Loader\";\nimport Message from \"../../components/message/Message\";\nimport { getOrderById } from \"../../redux/order/orderAction\";\n\nconst OrderPage = ({\n  match\n}) => {\n  var _orderDetail$orderCre, _orderDetail$orderCre2, _orderDetail$shipping, _orderDetail$shipping2, _orderDetail$shipping3, _orderDetail$shipping4, _orderDetail$orderIte, _orderDetail$orderIte2;\n\n  const dispatch = useDispatch();\n  const order = useSelector(state => state.orderReducer);\n  const {\n    orderDetail,\n    orderDetailFetchState,\n    orderDetailErrorMassge\n  } = order;\n  const [sdkReady, setSdkReady] = useState(false);\n  const orderPay = useSelector(state => state.orderPayReducer);\n  const {\n    loading: loadingPay,\n    success: successPay\n  } = orderPay;\n  useEffect(() => {\n    const addPaypalScript = async () => {\n      const {\n        data\n      } = await Axios.get(\"/api/config/paypal\");\n      const script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (successPay || !orderDetail) {\n      dispatch(getOrderById({\n        id: match.params.id\n      }));\n    } else if (!orderDetail.isPaid) {\n      if (!window.paypal) {\n        addPaypalScript();\n      } else {\n        setSdkReady(true);\n      }\n    }\n  }, [match.params.id, dispatch, orderDetail]);\n\n  const successPaymentHandler = paymentResult => {\n    console.log(paymentResult);\n  };\n\n  return orderDetailFetchState ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }) : orderDetailErrorMassge ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, orderDetailErrorMassge, \" \") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"Name: \"), \" \", orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$orderCre = orderDetail.orderCreator) === null || _orderDetail$orderCre === void 0 ? void 0 : _orderDetail$orderCre.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Email: \"), \" \", /*#__PURE__*/React.createElement(\"a\", {\n    href: `mailto:${orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$orderCre2 = orderDetail.orderCreator) === null || _orderDetail$orderCre2 === void 0 ? void 0 : _orderDetail$orderCre2.email}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \" \", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.orderCreator.email)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Address: \"), orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$shipping = orderDetail.shippingAddress) === null || _orderDetail$shipping === void 0 ? void 0 : _orderDetail$shipping.address, \" ,\", \" \", orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$shipping2 = orderDetail.shippingAddress) === null || _orderDetail$shipping2 === void 0 ? void 0 : _orderDetail$shipping2.city, \" ,\", \" \", orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$shipping3 = orderDetail.shippingAddress) === null || _orderDetail$shipping3 === void 0 ? void 0 : _orderDetail$shipping3.postalCode, \",\", orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$shipping4 = orderDetail.shippingAddress) === null || _orderDetail$shipping4 === void 0 ? void 0 : _orderDetail$shipping4.country), (orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.isDeliverd) ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"paid on \", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.deliverdAt, \" \") : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"not deliverd\"))), /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"payment Method\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, \"method: \"), orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.paymentMethod), (orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.isPaid) ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, \"paid on \", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.paidAt, \" \") : /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, \"not paid\"))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Order Items\"), (orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$orderIte = orderDetail.orderItems) === null || _orderDetail$orderIte === void 0 ? void 0 : _orderDetail$orderIte.length) === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, \"your cart is empty\") : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, orderDetail === null || orderDetail === void 0 ? void 0 : (_orderDetail$orderIte2 = orderDetail.orderItems) === null || _orderDetail$orderIte2 === void 0 ? void 0 : _orderDetail$orderIte2.map(item => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: item._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.image,\n    fluid: true,\n    rounded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item.product._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, \" \", item.name, \" \")), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 23\n    }\n  }, item.qty, \" x \", item.price, \" = \", item.qty * item.price, \"$\"))))))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \"Order summary\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, \"Items Price\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \" $\", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.itemsPrice, \" \"))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, \"$\", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.shippingPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, \"$\", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.taxPrice, \" \")))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"total\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, \"$\", orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.totalPrice, \" \"))), !(orderDetail === null || orderDetail === void 0 ? void 0 : orderDetail.isPaid) && /*#__PURE__*/React.createElement(ListGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 38\n    }\n  }, loadingPay && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 30\n    }\n  }), !sdkReady ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 28\n    }\n  }) : /*#__PURE__*/React.createElement(PayPalButton, {\n    amount: order.totalPrice,\n    onSuccess: successPaymentHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 41\n    }\n  }))))));\n};\n\nexport default OrderPage;","map":{"version":3,"sources":["/mnt/d/react&bac/mern-shop/frontend/src/pages/order/OrderPage.jsx"],"names":["Axios","React","useEffect","PayPalButton","useState","Col","ListGroup","Row","Image","Card","Button","useDispatch","useSelector","Link","Loader","Message","getOrderById","OrderPage","match","dispatch","order","state","orderReducer","orderDetail","orderDetailFetchState","orderDetailErrorMassge","sdkReady","setSdkReady","orderPay","orderPayReducer","loading","loadingPay","success","successPay","addPaypalScript","data","get","script","document","createElement","type","src","async","onload","body","appendChild","id","params","isPaid","window","paypal","successPaymentHandler","paymentResult","console","log","orderCreator","name","email","shippingAddress","address","city","postalCode","country","isDeliverd","deliverdAt","paymentMethod","paidAt","orderItems","length","map","item","_id","image","product","qty","price","itemsPrice","shippingPrice","taxPrice","totalPrice"],"mappings":"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","sourcesContent":["import Axios from \"axios\"\nimport React, { useEffect } from \"react\"\nimport { PayPalButton } from \"react-paypal-button-v2\"\nimport { useState } from \"react\"\nimport { Col, ListGroup, Row, Image, Card, Button } from \"react-bootstrap\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\nimport Loader from \"../../components/loader/Loader\"\nimport Message from \"../../components/message/Message\"\nimport { getOrderById } from \"../../redux/order/orderAction\"\n\nconst OrderPage = ({ match }) => {\n  const dispatch = useDispatch()\n  const order = useSelector((state) => state.orderReducer)\n  const { orderDetail, orderDetailFetchState, orderDetailErrorMassge } = order\n  const [sdkReady, setSdkReady] = useState(false)\n  const orderPay = useSelector((state) => state.orderPayReducer)\n  const { loading: loadingPay, success: successPay } = orderPay\n\n  useEffect(() => {\n    const addPaypalScript = async () => {\n      const { data } = await Axios.get(\"/api/config/paypal\")\n      const script = document.createElement(\"script\")\n      script.type = \"text/javascript\"\n      script.src = `https://www.paypal.com/sdk/js?client-id=${data}`\n      script.async = true\n      script.onload = () => {\n        setSdkReady(true)\n      }\n      document.body.appendChild(script)\n    }\n    if (successPay || !orderDetail ) {\n      dispatch(getOrderById({ id: match.params.id }))\n    }else if(!orderDetail.isPaid){\n      if(!window.paypal){\n        addPaypalScript()\n      }else{\n        setSdkReady(true)\n      }\n    }\n  }, [match.params.id, dispatch ,orderDetail ])\n  const  successPaymentHandler = (paymentResult)=>{\n    console.log(paymentResult);\n  }\n\n  return orderDetailFetchState ? (\n    <Loader />\n  ) : orderDetailErrorMassge ? (\n    <Message variant=\"danger\">{orderDetailErrorMassge} </Message>\n  ) : (\n    <>\n      <Row>\n        <Col md={8}>\n          <ListGroup variant=\"flush\">\n            <ListGroup.Item>\n              <h2>Shipping</h2>\n              <p>\n                <strong>Name: </strong> {orderDetail?.orderCreator?.name}\n              </p>\n              <p>\n                <strong>Email: </strong>{\" \"}\n                <a href={`mailto:${orderDetail?.orderCreator?.email}`}>\n                  {\" \"}\n                  {orderDetail?.orderCreator.email}\n                </a>\n              </p>\n              <p>\n                {\" \"}\n                <strong>Address: </strong>\n                {orderDetail?.shippingAddress?.address} ,{\" \"}\n                {orderDetail?.shippingAddress?.city} ,{\" \"}\n                {orderDetail?.shippingAddress?.postalCode},\n                {orderDetail?.shippingAddress?.country}\n              </p>\n\n              {orderDetail?.isDeliverd ? (\n                <Message variant=\"success\">paid on {orderDetail?.deliverdAt} </Message>\n              ) : (\n                <Message variant=\"danger\">not deliverd</Message>\n              )}\n            </ListGroup.Item>\n          </ListGroup>\n          <ListGroup variant=\"flush\">\n            <ListGroup.Item>\n              <h2>payment Method</h2>\n              <p>\n                <strong>method: </strong>\n                {orderDetail?.paymentMethod}\n              </p>\n              {orderDetail?.isPaid ? (\n                <Message variant=\"success\">paid on {orderDetail?.paidAt} </Message>\n              ) : (\n                <Message variant=\"danger\">not paid</Message>\n              )}\n            </ListGroup.Item>\n          </ListGroup>\n          <ListGroup.Item>\n            <h2>Order Items</h2>\n            {orderDetail?.orderItems?.length === 0 ? (\n              <Message>your cart is empty</Message>\n            ) : (\n              <ListGroup variant=\"flush\">\n                {orderDetail?.orderItems?.map((item) => (\n                  <ListGroup.Item key={item._id}>\n                    <Row>\n                      <Col md={1}>\n                        <Image src={item.image} fluid rounded />\n                      </Col>\n                      <Col>\n                        <Link to={`/product/${item.product._id}`}> {item.name} </Link>\n                      </Col>\n                      <Col>\n                        {item.qty} x {item.price} = {item.qty * item.price}$\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n                ))}\n              </ListGroup>\n            )}\n          </ListGroup.Item>\n        </Col>\n        <Col md={4}>\n          <Card>\n            <ListGroup variant=\"flush\">\n              <ListGroup.Item>\n                <h2>Order summary</h2>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Items Price</Col>\n                  <Col> ${orderDetail?.itemsPrice} </Col>\n                </Row>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Shipping</Col>\n                  <Col>${orderDetail?.shippingPrice}</Col>\n                </Row>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Tax</Col>\n                  <Col>${orderDetail?.taxPrice} </Col>\n                </Row>\n              </ListGroup.Item>\n            </ListGroup>\n            <ListGroup.Item>\n              <Row>\n                <Col>total</Col>\n                <Col>${orderDetail?.totalPrice} </Col>\n              </Row>\n            </ListGroup.Item>\n            {!orderDetail?.isPaid && <ListGroup>\n              {loadingPay && <Loader />}\n              {!sdkReady ? <Loader /> : <PayPalButton amount={order.totalPrice} onSuccess={successPaymentHandler}></PayPalButton>}\n              </ListGroup>}\n          </Card>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default OrderPage\n"]},"metadata":{},"sourceType":"module"}