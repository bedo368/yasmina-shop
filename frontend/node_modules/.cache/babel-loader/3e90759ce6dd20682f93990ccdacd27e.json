{"ast":null,"code":"import Axios from \"axios\";\nimport orderTypes from \"./orderTypes\";\nexport const createOrder = cart => (dispatch, getState) => async (dispatch, getState) => {\n  const {\n    orderItems,\n    shippingAddress,\n    paymentMethode,\n    taxPrice,\n    shippingPrice,\n    totalPrice,\n    itemsPrice\n  } = cart;\n  console.log(cart);\n\n  try {\n    console.log(cart);\n    const token = getState().userReducer.userInfo.token;\n    dispatch({\n      type: orderTypes.CREATE_ORDER_START\n    });\n    const query = `\n      mutation($orderItems : String!\n        $shippingAddress : String!\n        $paymentMethode : String! \n        $taxPrice : Float!\n        $shippingPrice: Float!\n        $totalPrice: Float!\n        $itemsPrice : Float!){\n        createOrder($orderItems : $orderItems\n            $shippingAddress :  $shippingAddress\n            $paymentMethode : $paymentMethode\n            $taxPrice : $taxPrice\n            $shippingPrice: $shippingPrice\n            $totalPrice:  $totalPrice\n            $itemsPrice : $itemsPrice )\n            {\n                _id\n            }\n          }\n        `;\n    const variables = {};\n    const {\n      data\n    } = await Axios({\n      method: \"POST\",\n      url: \"/graphql\",\n      data: {\n        query,\n        variables\n      },\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    });\n    dispatch({\n      type: orderTypes.CREATE_ORDER_SUCCESS,\n      payload: data.data.updateUserProfile\n    });\n  } catch (error) {\n    const errorMessage = error.response.data.errors ? error.response.data.errors[0].message : error.response.data ? error.response.data : \"error happend\";\n    dispatch({\n      type: orderTypes.CREATE_ORDER_FAIL,\n      payload: errorMessage\n    });\n  }\n};","map":{"version":3,"sources":["/mnt/d/react&bac/mern-shop/frontend/src/redux/order/orderAction.js"],"names":["Axios","orderTypes","createOrder","cart","dispatch","getState","orderItems","shippingAddress","paymentMethode","taxPrice","shippingPrice","totalPrice","itemsPrice","console","log","token","userReducer","userInfo","type","CREATE_ORDER_START","query","variables","data","method","url","headers","Authorization","CREATE_ORDER_SUCCESS","payload","updateUserProfile","error","errorMessage","response","errors","message","CREATE_ORDER_FAIL"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AAEA,OAAO,MAAMC,WAAW,GAAKC,IAAD,IAAS,CAACC,QAAD,EAAYC,QAAZ,KAAwB,OACzDD,QADyD,EAEzDC,QAFyD,KAGtD;AACJ,QAAM;AAACC,IAAAA,UAAD;AAAaC,IAAAA,eAAb;AAA6BC,IAAAA,cAA7B;AAA4CC,IAAAA,QAA5C;AAAqDC,IAAAA,aAArD;AAAmEC,IAAAA,UAAnE;AAA8EC,IAAAA;AAA9E,MAA6FT,IAAnG;AACDU,EAAAA,OAAO,CAACC,GAAR,CAAYX,IAAZ;;AACE,MAAI;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAYX,IAAZ;AACF,UAAMY,KAAK,GAAGV,QAAQ,GAAGW,WAAX,CAAuBC,QAAvB,CAAgCF,KAA9C;AACAX,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAEjB,UAAU,CAACkB;AADV,KAAD,CAAR;AAGA,UAAMC,KAAK,GAAI;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAnBM;AAoBI,UAAMC,SAAS,GAAG,EAAlB;AACJ,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMtB,KAAK,CAAC;AAC3BuB,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,GAAG,EAAE,UAFsB;AAG3BF,MAAAA,IAAI,EAAE;AACJF,QAAAA,KADI;AAEJC,QAAAA;AAFI,OAHqB;AAO3BI,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPC,QAAAA,aAAa,EAAG,UAASX,KAAM;AAFxB;AAPkB,KAAD,CAA5B;AAYAX,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAEjB,UAAU,CAAC0B,oBADV;AAEPC,MAAAA,OAAO,EAAEN,IAAI,CAACA,IAAL,CAAUO;AAFZ,KAAD,CAAR;AAMD,GA7CD,CA6CE,OAAOC,KAAP,EAAc;AACd,UAAMC,YAAY,GAAGD,KAAK,CAACE,QAAN,CAAeV,IAAf,CAAoBW,MAApB,GACjBH,KAAK,CAACE,QAAN,CAAeV,IAAf,CAAoBW,MAApB,CAA2B,CAA3B,EAA8BC,OADb,GAEjBJ,KAAK,CAACE,QAAN,CAAeV,IAAf,GACAQ,KAAK,CAACE,QAAN,CAAeV,IADf,GAEA,eAJJ;AAKAlB,IAAAA,QAAQ,CAAC;AACPc,MAAAA,IAAI,EAAEjB,UAAU,CAACkC,iBADV;AAEPP,MAAAA,OAAO,EAAEG;AAFF,KAAD,CAAR;AAID;AACF,CA9DI","sourcesContent":["import Axios from \"axios\"\nimport orderTypes from \"./orderTypes\"\n\nexport const createOrder =  (cart)=> (dispatch , getState)=> async (\n    dispatch,\n    getState\n  ) => {\n   const {orderItems ,shippingAddress,paymentMethode,taxPrice,shippingPrice,totalPrice,itemsPrice } = cart\n  console.log(cart);\n    try {\n        console.log(cart);\n      const token = getState().userReducer.userInfo.token\n      dispatch({\n        type: orderTypes.CREATE_ORDER_START,\n      })\n      const query = `\n      mutation($orderItems : String!\n        $shippingAddress : String!\n        $paymentMethode : String! \n        $taxPrice : Float!\n        $shippingPrice: Float!\n        $totalPrice: Float!\n        $itemsPrice : Float!){\n        createOrder($orderItems : $orderItems\n            $shippingAddress :  $shippingAddress\n            $paymentMethode : $paymentMethode\n            $taxPrice : $taxPrice\n            $shippingPrice: $shippingPrice\n            $totalPrice:  $totalPrice\n            $itemsPrice : $itemsPrice )\n            {\n                _id\n            }\n          }\n        `\n          const variables = {}\n      const { data } = await Axios({\n        method: \"POST\",\n        url: \"/graphql\",\n        data: {\n          query,\n          variables \n        },\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      dispatch({\n        type: orderTypes.CREATE_ORDER_SUCCESS,\n        payload: data.data.updateUserProfile,\n      })\n   \n  \n    } catch (error) {\n      const errorMessage = error.response.data.errors\n        ? error.response.data.errors[0].message\n        : error.response.data\n        ? error.response.data\n        : \"error happend\"\n      dispatch({\n        type: orderTypes.CREATE_ORDER_FAIL,\n        payload: errorMessage,\n      })\n    }\n  }\n  "]},"metadata":{},"sourceType":"module"}