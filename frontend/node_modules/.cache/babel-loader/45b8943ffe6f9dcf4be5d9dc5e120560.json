{"ast":null,"code":"var _jsxFileName = \"/mnt/d/react&bac/mern-shop/frontend/src/pages/PlaceOrderPage/PlaceOrderPage.jsx\";\nimport React, { useEffect } from \"react\";\nimport { Col, ListGroup, Row, Image, Card, Button } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport Message from \"../../components/message/Message\";\nimport { createOrder } from \"../../redux/order/orderAction\";\n\nconst PlaceOrderPage = ({\n  history\n}) => {\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cartReducer);\n  const order = useSelector(state => state.orderReducer);\n  const {\n    shippingAddress,\n    paymentMethod,\n    cartItems\n  } = cart;\n\n  if (!shippingAddress) {\n    history.push(\"/shipping\");\n  } else if (!paymentMethod) {\n    history.push(\"/payment\");\n  }\n\n  const placeOrderHandler = e => {\n    dispatch(createOrder(cart));\n  };\n\n  useEffect(() => {\n    if (success) {\n      history.push(`/order/${order.orders._id}`);\n    }\n  }, [order, history]); // calclute price\n\n  cart.itemsPrice = cartItems.reduce((acc, item) => acc + item.price * item.qty, 0);\n  cart.shippingPrice = cart.itemPrices > 100 ? 0 : 40;\n  cart.taxPrice = Number(0.15 * cart.itemsPrice);\n  cart.totalPrice = Number(cart.itemsPrice + cart.shippingPrice + cart.taxPrice);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 15\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 15\n    }\n  }, \"Address: \"), shippingAddress === null || shippingAddress === void 0 ? void 0 : shippingAddress.address, \" , \", shippingAddress === null || shippingAddress === void 0 ? void 0 : shippingAddress.city, \" ,\", \" \", shippingAddress === null || shippingAddress === void 0 ? void 0 : shippingAddress.postalCode, \",\", shippingAddress === null || shippingAddress === void 0 ? void 0 : shippingAddress.country)), /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 15\n    }\n  }, \"payment Method\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }, \"method: \"), paymentMethod)), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, \"Order Items\"), cartItems.length === 0 ? /*#__PURE__*/React.createElement(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }, \"your cart is empty\") : /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }, cartItems.map(item => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: item._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.image,\n    fluid: true,\n    rounded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/product/${item._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, \" \", item.name, \" \")), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 23\n    }\n  }, item.qty, \" x \", item.price, \" = \", item.qty * item.price, \"$\"))))))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"Order summary\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  }, \"Items Price\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  }, \" $\", cart.itemsPrice, \" \"))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, \"$\", cart.shippingPrice))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 19\n    }\n  }, \"$\", cart.taxPrice, \" \")))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"total\"), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"$\", cart.totalPrice, \" \"))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    className: \"btn-block\",\n    disabled: cartItems.length === 0 || !shippingAddress || !paymentMethod,\n    onClick: placeOrderHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, \"payment\", \" \"))))));\n};\n\nexport default PlaceOrderPage;","map":{"version":3,"sources":["/mnt/d/react&bac/mern-shop/frontend/src/pages/PlaceOrderPage/PlaceOrderPage.jsx"],"names":["React","useEffect","Col","ListGroup","Row","Image","Card","Button","useDispatch","useSelector","Link","Message","createOrder","PlaceOrderPage","history","dispatch","cart","state","cartReducer","order","orderReducer","shippingAddress","paymentMethod","cartItems","push","placeOrderHandler","e","success","orders","_id","itemsPrice","reduce","acc","item","price","qty","shippingPrice","itemPrices","taxPrice","Number","totalPrice","address","city","postalCode","country","length","map","image","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\"\nimport { Col, ListGroup, Row, Image, Card, Button } from \"react-bootstrap\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\nimport Message from \"../../components/message/Message\"\nimport { createOrder } from \"../../redux/order/orderAction\"\n\nconst PlaceOrderPage = ({ history }) => {\n  const dispatch = useDispatch()\n  const cart = useSelector((state) => state.cartReducer)\n  const order = useSelector((state) => state.orderReducer)\n  const { shippingAddress, paymentMethod, cartItems } = cart\n  if (!shippingAddress) {\n    history.push(\"/shipping\")\n  } else if (!paymentMethod) {\n    history.push(\"/payment\")\n  }\n  const placeOrderHandler = (e) => {\n    dispatch(createOrder(cart))\n  }\n  useEffect(() => {\n    if (success) {\n      history.push(`/order/${order.orders._id}`)\n    }\n  }, [order, history])\n  // calclute price\n  cart.itemsPrice = cartItems.reduce((acc, item) => acc + item.price * item.qty, 0)\n  cart.shippingPrice = cart.itemPrices > 100 ? 0 : 40\n  cart.taxPrice = Number(0.15 * cart.itemsPrice)\n  cart.totalPrice = Number(cart.itemsPrice + cart.shippingPrice + cart.taxPrice)\n  return (\n    <>\n      <Row>\n        <Col md={8}>\n          <ListGroup variant=\"flush\">\n            <ListGroup.Item>\n              <h2>Shipping</h2>\n              <strong>Address: </strong>\n              {shippingAddress?.address} , {shippingAddress?.city} ,{\" \"}\n              {shippingAddress?.postalCode},{shippingAddress?.country}\n            </ListGroup.Item>\n          </ListGroup>\n          <ListGroup variant=\"flush\">\n            <ListGroup.Item>\n              <h2>payment Method</h2>\n              <strong>method: </strong>\n              {paymentMethod}\n            </ListGroup.Item>\n          </ListGroup>\n          <ListGroup.Item>\n            <h2>Order Items</h2>\n            {cartItems.length === 0 ? (\n              <Message>your cart is empty</Message>\n            ) : (\n              <ListGroup variant=\"flush\">\n                {cartItems.map((item) => (\n                  <ListGroup.Item key={item._id}>\n                    <Row>\n                      <Col md={1}>\n                        <Image src={item.image} fluid rounded />\n                      </Col>\n                      <Col>\n                        <Link to={`/product/${item._id}`}> {item.name} </Link>\n                      </Col>\n                      <Col>\n                        {item.qty} x {item.price} = {item.qty * item.price}$\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n                ))}\n              </ListGroup>\n            )}\n          </ListGroup.Item>\n        </Col>\n        <Col md={4}>\n          <Card>\n            <ListGroup variant=\"flush\">\n              <ListGroup.Item>\n                <h2>Order summary</h2>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Items Price</Col>\n                  <Col> ${cart.itemsPrice} </Col>\n                </Row>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Shipping</Col>\n                  <Col>${cart.shippingPrice}</Col>\n                </Row>\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Row>\n                  <Col>Tax</Col>\n                  <Col>${cart.taxPrice} </Col>\n                </Row>\n              </ListGroup.Item>\n            </ListGroup>\n            <ListGroup.Item>\n              <Row>\n                <Col>total</Col>\n                <Col>${cart.totalPrice} </Col>\n              </Row>\n            </ListGroup.Item>\n            <ListGroup.Item>\n              <Button\n                type=\"button\"\n                className=\"btn-block\"\n                disabled={cartItems.length === 0 || !shippingAddress || !paymentMethod}\n                onClick={placeOrderHandler}\n              >\n                payment{\" \"}\n              </Button>\n            </ListGroup.Item>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  )\n}\n\nexport default PlaceOrderPage\n"]},"metadata":{},"sourceType":"module"}