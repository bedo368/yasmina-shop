(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[19],{146:function(e,n,t){"use strict";t.d(n,"b",(function(){return p})),t.d(n,"a",(function(){return l})),t.d(n,"c",(function(){return m}));var a=t(26),r=t.n(a),c=t(43),o=t(44),i=t.n(o),u=t(27),d=function(e){return{type:u.a.FETCH_PRODUCT_FAIL,payload:e}},p=function(e){return function(n){n({type:u.a.FETCH_PRODUCT_START});i()({method:"POST",data:{query:"\n     query getProductById($id: String!) {\n        getProductById(id : $id) {\n         _id\n         name\n         image\n         brand\n         price\n         rating\n         numReviews\n         category\n         description\n         countInStock\n         \n         \n       }\n     }\n     ",variables:{id:e}},url:"/graphql"}).then((function(e){var t;n((t=e.data.data.getProductById,{type:u.a.FETCH_PRODUCT_SUCCESS,payload:t}))})).catch((function(e){var t=e.response.data.errors?e.response.data.errors[0].message:e.response.data;n(d(t))}))}},l=function(e){var n=e.name,t=(e.image,e.brand),a=e.price,o=e.category,p=e.description,l=e.countInStock,m=e.imageUpload;return function(){var e=Object(c.a)(r.a.mark((function e(c,s){var g,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=s().userReducer.userInfo.token,b={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(g)}},c({type:u.a.CLEAR_PRODUCT}),c({type:u.a.FETCH_PRODUCT_START}),"\n  mutation createProduct($name :String!, $description:String!,$image:String!,$category:String!, $brand:String!,$countInStock:Float!,   $price:Float!) {\n    createProduct( name :$name,  description:$description, image:$image ,category:$category,  brand:$brand, countInStock:$countInStock,    price:$price) {\n      _id\n      name\n      image\n      brand\n      price\n      rating\n      numReviews\n      category\n      description\n      countInStock\n    }\n  }\n  ",i.a.post("/upload",m,b).then((function(e){i()({method:"POST",data:{query:"\n  mutation createProduct($name :String!, $description:String!,$image:String!,$category:String!, $brand:String!,$countInStock:Float!,   $price:Float!) {\n    createProduct( name :$name,  description:$description, image:$image ,category:$category,  brand:$brand, countInStock:$countInStock,    price:$price) {\n      _id\n      name\n      image\n      brand\n      price\n      rating\n      numReviews\n      category\n      description\n      countInStock\n    }\n  }\n  ",variables:{name:n,image:e.data,brand:t,price:Number(a),category:o,description:p,countInStock:Number(l)}},url:"/graphql",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(g)}}).then((function(e){c({type:u.a.CREATE_NEW_PRODUCT,payload:e.data.data.createProduct})})).then((function(){c({type:u.a.CLEAR_PRODUCT})})).catch((function(e){var n=e.response.data.errors?e.response.data.errors[0].message:e.response.data;c(d(n))}))}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},m=function(e){var n=e._id,t=e.name,a=(e.image,e.brand),o=e.price,p=e.category,l=e.description,m=e.countInStock;e.imageUpload;return function(){var e=Object(c.a)(r.a.mark((function e(c,s){var g;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=s().userReducer.userInfo.token,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(g)}},c({type:u.a.CLEAR_PRODUCT}),c({type:u.a.FETCH_PRODUCT_START}),"\n  mutation updateProduct($name :String, $description:String,$image:String,$category:String, $brand:String,$countInStock:Float,   $price:Float , $_id:String!) {\n    updateProduct( _id:$_id ,name :$name,  description:$description, image:$image ,category:$category,  brand:$brand, countInStock:$countInStock,    price:$price) {\n      _id\n      name\n      image\n      brand\n      price\n      rating\n      numReviews\n      category\n      description\n      countInStock\n    }\n  }\n  ",i()({method:"POST",data:{query:"\n  mutation updateProduct($name :String, $description:String,$image:String,$category:String, $brand:String,$countInStock:Float,   $price:Float , $_id:String!) {\n    updateProduct( _id:$_id ,name :$name,  description:$description, image:$image ,category:$category,  brand:$brand, countInStock:$countInStock,    price:$price) {\n      _id\n      name\n      image\n      brand\n      price\n      rating\n      numReviews\n      category\n      description\n      countInStock\n    }\n  }\n  ",variables:{_id:n,name:t,brand:a,price:Number(o),category:p,description:l,countInStock:Number(m)}},url:"/graphql",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(g)}}).then((function(e){c({type:u.a.CLEAR_PRODUCT}),c({type:u.a.UPDATE_PRODUCT,action:e.data.data.updateProduct})})).catch((function(e){var n=e.response.data.errors?e.response.data.errors[0].message:e.response.data;c(d(n))}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}},159:function(e,n,t){},166:function(e,n,t){"use strict";t.r(n);var a=t(64),r=t(3),c=t(26),o=t.n(c),i=t(43),u=t(63),d=t(0),p=t.n(d),l=t(133),m=t(82),s=t(136),g=t(84),b=t(62),y=t(25),S=(t(159),t(146));n.default=function(e){var n=e.history,t=Object(y.c)((function(e){return e.productReducer})),c=Object(y.b)(),$=t.createProductState,f=t.loading;Object(d.useEffect)((function(){$&&!f&&n.push("/admin/productslist")}),[$,c,f]);var E=Object(d.useState)({name:"",price:"",image:"",brand:"",description:"",countInStock:"",category:""}),h=Object(u.a)(E,2),C=h[0],I=h[1],v=Object(d.useState)(null),k=Object(u.a)(v,2),T=k[0],_=k[1],P=function(){var e=Object(i.a)(o.a.mark((function e(n){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.target.files[0],(a=new FormData).append("image",t),_(a);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=C.name,R=C.price,j=C.image,F=C.brand,U=C.description,w=C.countInStock,A=C.category,D=function(e){var n=e.target,t=n.name,c=n.value;I((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},t,c))}))};return p.a.createElement("div",{className:"create-product"},f&&p.a.createElement(b.a,null),p.a.createElement("h2",null,"create new product"),p.a.createElement("section",{className:"product-info"},p.a.createElement(l.a,null,p.a.createElement(m.a,{md:6},p.a.createElement(s.a,{onSubmit:function(e){e.preventDefault(),c(Object(S.a)({name:O,price:R,image:j,brand:F,description:U,countInStock:w,category:A,imageUpload:T}))}},p.a.createElement(s.a.Group,{controlId:"name"},p.a.createElement(s.a.Label,null,"Name"),p.a.createElement(s.a.Control,{type:"text",placeholder:"Enter name",name:"name",value:O,onChange:D})),p.a.createElement(s.a.Group,{controlId:"price"},p.a.createElement(s.a.Label,null,"price"),p.a.createElement(s.a.Control,{type:"Number",placeholder:"Enter price",name:"price",value:R,onChange:D})),p.a.createElement(s.a.Group,{controlId:"image"},p.a.createElement(s.a.Label,null,"image"),p.a.createElement(s.a.File,{label:"chose file ",custom:!0,onChange:P})),p.a.createElement(s.a.Group,{controlId:"brand"},p.a.createElement(s.a.Label,null,"brand"),p.a.createElement(s.a.Control,{type:"text",placeholder:"Enter brand",name:"brand",value:F,onChange:D})),p.a.createElement(s.a.Group,{controlId:"description"},p.a.createElement(s.a.Label,null,"description"),p.a.createElement(s.a.Control,{type:"description",placeholder:"Enter description",name:"description",value:U,onChange:D}),p.a.createElement(s.a.Group,{controlId:"category"},p.a.createElement(s.a.Label,null,"category"),p.a.createElement(s.a.Control,{type:"text",placeholder:"Enter category",name:"category",value:A,onChange:D}))),p.a.createElement(s.a.Group,{controlId:"countInStock"},p.a.createElement(s.a.Label,null,"count In Stuck"),p.a.createElement(s.a.Control,{type:"number",placeholder:"Enter countInStock",name:"countInStock",value:w,onChange:D})),p.a.createElement(g.a,{type:"submit"}," Create"))))))}}}]);
//# sourceMappingURL=19.b0c7c9f3.chunk.js.map